public interface OrderRepository extends JpaRepository<ModelOrder,Long> {
	
@Query("select a from SM_POCHD a where a.modelPOMst.pOMstId=:pOMstId")
	public List<ModelPOChd> findPOChdByPOMstId(@Param("pOMstId")Long pOMstId);


@Query("select a from MLFM_ORDER a where a.orderId=:id")
	public ModelOrder findOwnerTypeId(@Param("id") Long id);
	//@Query("select a from MLFM_ORDER a where a.modelOrderOwner.ownerName LIKE CONCAT('%',:initial_Buyer,'%') and a.ultimateOwner.ownerName LIKE CONCAT('%',:ultimate_Buyer,'%') and a.orderId=COALESCE(:inquiry_Id,a.orderId) and a.refMailId LIKE CONCAT('%',:mail_Id,'%') and a.userRefNo=COALESCE(:user_inquery_no,a.userRefNo) and a.orderRemarks LIKE CONCAT('%',:remarks,'%') and a.enteredBy.userName LIKE CONCAT('%',:user,'%') and a.orderDate BETWEEN coalesce(:inq_st,a.orderDate) AND coalesce(:inq_ed,a.orderDate) and a.mailSentDate BETWEEN coalesce(:mail_st,a.mailSentDate) AND coalesce(:mail_ed,a.mailSentDate)")
	//public List<ModelOrder> findOwnerDetails(@Param("initial_Buyer") String initial_Buyer,@Param("ultimate_Buyer")String ultimate_Buyer,@Param("inquiry_Id")Long inquiry_Id,@Param("mail_Id")String mail_Id,@Param("user_inquery_no")Long user_inquery_no,@Param("remarks")String remarks,@Param("user")String user,@Param("inq_st")@DateTimeFormat(pattern="yyyy-MM-dd")Date inq_st,@Param("inq_ed")@DateTimeFormat(pattern="yyyy-MM-dd")Date inq_ed,@Param("mail_st")@DateTimeFormat(pattern="yyyy-MM-dd")Date mail_st,@Param("mail_ed")@DateTimeFormat(pattern="yyyy-MM-dd")Date mail_ed);	
	
	@Query("select a from MLFM_ORDER a where UPPER(trim(a.modelOrderOwner.ownerName)) LIKE CONCAT('%',:initial_Buyer,'%') and a.ultimateOwner.ownerName LIKE CONCAT('%',:ultimate_Buyer,'%') and a.orderId=COALESCE(:inquiry_Id,a.orderId) and a.refMailId LIKE CONCAT('%',:mail_Id,'%') and a.userRefNo=COALESCE(:user_inquery_no,a.userRefNo) and a.orderRemarks LIKE CONCAT('%',:remarks,'%') and a.enteredBy.userName LIKE CONCAT('%',:user,'%') and a.orderDate BETWEEN coalesce(:inq_st,a.orderDate) AND coalesce(:inq_ed,a.orderDate)")
	//@Query("select a from MLFM_ORDER a where UPPER(trim(a.modelOrderOwner.ownerName)) LIKE CONCAT('%',upper(TRIM(:initialBuyer)),'%') and UPPER(trim(a.ultimateOwner.ownerName)) LIKE CONCAT('%',upper(TRIM(:ultimateBuyer)),'%') and a.orderId=COALESCE(:inquiry_Id,a.orderId) and a.refMailId LIKE CONCAT('%',:mail_Id,'%') and a.userRefNo=COALESCE(:user_inquery_no,a.userRefNo) and a.orderRemarks LIKE CONCAT('%',:remarks,'%') and upper(TRIM(a.enteredBy.userName)) LIKE CONCAT('%',:user,'%') and a.orderDate BETWEEN coalesce(:inq_st,a.orderDate) AND coalesce(:inq_ed,a.orderDate)")
	public List<ModelOrder> findOwnerDetails(@Param("initial_Buyer") String initial_Buyer,@Param("ultimate_Buyer")String ultimate_Buyer,@Param("inquiry_Id")Long inquiry_Id,@Param("mail_Id")String mail_Id,@Param("user_inquery_no")Long user_inquery_no,@Param("remarks")String remarks,@Param("user")String user,@Param("inq_st")@DateTimeFormat(pattern="yyyy-MM-dd")Date inq_st,@Param("inq_ed")@DateTimeFormat(pattern="yyyy-MM-dd")Date inq_ed);	

		
	/*
	@Query("select a from MLFM_ORDER a where UPPER(trim(a.modelOrderOwner.ownerName)) LIKE CONCAT('%',:initial_Buyer,'%') and a.ultimateOwner.ownerName LIKE CONCAT('%',:ultimate_Buyer,'%') and a.orderId=COALESCE(:inquiry_Id,a.orderId) and a.refMailId LIKE CONCAT('%',:mail_Id,'%') and a.userRefNo=COALESCE(:user_inquery_no,a.userRefNo) and a.orderRemarks LIKE CONCAT('%',:remarks,'%') and a.enteredBy.userName LIKE CONCAT('%',:user,'%') and a.orderDate BETWEEN coalesce(:inq_st,a.orderDate) AND coalesce(:inq_ed,a.orderDate) and a.activeStatus=:active_status")
	public List<ModelOrder> findOwnerDetailsActive(@Param("initial_Buyer") String initial_Buyer,@Param("ultimate_Buyer")String ultimate_Buyer,@Param("inquiry_Id")Long inquiry_Id,@Param("mail_Id")String mail_Id,@Param("user_inquery_no")Long user_inquery_no,@Param("remarks")String remarks,@Param("user")String user,@Param("inq_st")@DateTimeFormat(pattern="yyyy-MM-dd")Date inq_st,@Param("inq_ed")@DateTimeFormat(pattern="yyyy-MM-dd")Date inq_ed, @Param("active_status")int active_status);	
    */
	
	@Query("select a from MLFM_ORDER a where a.modelOrderOwner.orderOwnerId =COALESCE(:initial_Buyer,a.modelOrderOwner.orderOwnerId ) and a.ultimateOwner.orderOwnerId =COALESCE(:ultimate_Buyer,a.ultimateOwner.orderOwnerId) and a.orderId=COALESCE(:inquiry_Id,a.orderId) and a.refMailId LIKE CONCAT('%',:mail_Id,'%') and a.userRefNo=COALESCE(:user_inquery_no,a.userRefNo) and a.orderRemarks LIKE CONCAT('%',:remarks,'%') and a.enteredBy.userName LIKE CONCAT('%',:user,'%') and a.orderDate BETWEEN coalesce(:inq_st,a.orderDate) AND coalesce(:inq_ed,a.orderDate) and a.activeStatus=:active_status")
	//@Query("select a from MLFM_ORDER a where UPPER(trim(a.modelOrderOwner.ownerName)) LIKE CONCAT('%',upper(TRIM(:initialBuyer)),'%') and UPPER(trim(a.ultimateOwner.ownerName)) LIKE CONCAT('%',upper(TRIM(:ultimateBuyer)),'%') and a.orderId=COALESCE(:inquiry_Id,a.orderId) and a.refMailId LIKE CONCAT('%',:mail_Id,'%') and a.userRefNo=COALESCE(:user_inquery_no,a.userRefNo) and a.orderRemarks LIKE CONCAT('%',:remarks,'%') and upper(TRIM(a.enteredBy.userName)) LIKE CONCAT('%',:user,'%') and a.orderDate BETWEEN coalesce(:inq_st,a.orderDate) AND coalesce(:inq_ed,a.orderDate)")
	public List<ModelOrder> findOwnerDetailsActive(@Param("initial_Buyer") Long initial_Buyer,@Param("ultimate_Buyer")Long ultimate_Buyer,@Param("inquiry_Id")Long inquiry_Id,@Param("mail_Id")String mail_Id,@Param("user_inquery_no")Long user_inquery_no,@Param("remarks")String remarks,@Param("user")String user,@Param("inq_st")@DateTimeFormat(pattern="yyyy-MM-dd")Date inq_st,@Param("inq_ed")@DateTimeFormat(pattern="yyyy-MM-dd")Date inq_ed, @Param("active_status")int active_status);	
	
	@Query("select a from MLFM_ORDER a where UPPER(trim(a.modelOrderOwner.ownerName)) LIKE CONCAT('%',upper(TRIM(:initialBuyer)),'%') and UPPER(trim(a.ultimateOwner.ownerName)) LIKE CONCAT('%',upper(TRIM(:ultimateBuyer)),'%') and upper(TRIM(a.enteredBy.userName)) LIKE CONCAT('%',upper(TRIM(:user)),'%') and a.orderDate BETWEEN coalesce(:stDate,a.orderDate) AND coalesce(:endDate,a.orderDate)")
	public List<ModelOrder> findOrderOnCriteria(@Param("initialBuyer") String initialBuyer,@Param("ultimateBuyer")String ultimateBuyer,@Param("user")String user,@Param("stDate")@DateTimeFormat(pattern="yyyy-MM-dd")Date stDate,@Param("endDate")@DateTimeFormat(pattern="yyyy-MM-dd")Date endDate);
	//@Query("select a from MLFM_ORDER a where a.orderDate BETWEEN coalesce(:stDate,a.orderDate) AND coalesce(:endDate,a.orderDate)")
	//public List<ModelOrder> findOrderOnCriteria(@Param("stDate")@DateTimeFormat(pattern="yyyy-MM-dd")Date stDate,@Param("endDate")@DateTimeFormat(pattern="yyyy-MM-dd")Date endDate);	
